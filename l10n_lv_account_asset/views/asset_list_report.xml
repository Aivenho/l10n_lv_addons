<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="asset_list_report_document">
    <t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <div class="page">
            <style type="text/css">
                div.title {
                    font-size: 18px;
                    display: inline;
                    text-align: center;
                    vertical-align: middle;
                    position: fixed;
                    left: 35%;
                    margin-top: 20px; 
                    margin-bottom: 20px;
                }
                table.list_table thead {
                    border: 1px solid black;
                }
                table.list_table th {
                    font-weight: normal;
                    text-align: center;
                    vertical-align: middle;
                }
                table.list_table td, th {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    padding-left: 4px;
                    padding-right: 4px;
                }
            </style>
            <t t-set="title" t-value="(company.partner_id.title and (company.partner_id.title.shortcut and company.partner_id.title.shortcut.upper()) or company.partner_id.title.name) or ''"></t>
            <div width="100%">
                <div style="float: left; text-align: left; display: inline; vertical-align: middle; margin-top: 20px; margin-bottom: 20px;">
                    <span t-esc="company.name"/>
                    <span t-esc="title"/>
                </div>
	            <div class="title">List of Assets</div>
                <div style="float: right; text-align: right; display: inline; vertical-align: middle; margin-top: 20px; margin-bottom: 20px;">
	                <span t-if="data">
                        <span>on</span>
                        <span style="font-weight: bold;" t-esc="formatLang(data['form']['date'], date=True)"/>
                    </span>
                </div>
            </div>
	        <br/>
	        <br/>
	        <br/>
	        <br/>
            <table class="list_table"  width="100%">
                <thead>
			        <tr>
				        <th colspan="3"></th>
				        <th>Uzskaites vērtība</th>
				        <th>Nolietojums</th>
				        <th>Atlikusī vērtība</th>
			        </tr>
		        </thead>
                <t t-set="curr_acc" t-value="None"></t>
                <t t-set="account_total_purchase" t-value="0.0"></t>
                <t t-set="account_total_depr" t-value="0.0"></t>
                <t t-set="account_total_left" t-value="0.0"></t>
                <t t-set="total_purchase" t-value="0.0"></t>
                <t t-set="total_depr" t-value="0.0"></t>
                <t t-set="total_left" t-value="0.0"></t>
                <t t-set="count" t-value="1"></t>
                <t t-set="form" t-value="data and data['form'] or {}"></t>
                <t t-set="asset_list" t-value="lines(form)"></t>
                <t t-set="test_count" t-value="0"></t>
		        <tbody>
                    <t t-foreach="asset_list" t-as="asset">
                        <t t-set="test_count" t-value="test_count + 1"></t>
        	            <tr t-if="curr_acc != asset.category_id.account_asset_id and curr_acc != None" style="border-bottom: 1px solid black;">
				            <td colspan="3">
					            <span>Kopā kontā:</span>
				            </td>
				            <td style="border-top:1px solid; text-align:right;">
					            <span t-esc="formatLang(account_total_purchase)"/>
				            </td>
				            <td style="border-top:1px solid; text-align:right;">
					            <span t-esc="formatLang(account_total_depr)"/>
				            </td>
				            <td style="border-top:1px solid; text-align:right;">
					            <span t-esc="formatLang(account_total_left)"/>
				            </td>
			            </tr>
			            <tr t-if="curr_acc != asset.category_id.account_asset_id">
				            <td style="border-top:none; text-align:left; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span>Konts:</span>
                            </td>
				            <td style="border-top:none; text-align:left; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span t-esc="asset.category_id.account_asset_id.code"/>
                            </td>
				            <td style="border-top:none; text-align:center; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span t-esc="asset.category_id.account_asset_id.name"/>
                            </td>
				            <td colspan="3"/>
			            </tr>
                        <t t-if="curr_acc != asset.category_id.account_asset_id">
                            <t t-set="account_total_purchase" t-value="0.0"></t>
                            <t t-set="account_total_depr" t-value="0.0"></t>
                            <t t-set="account_total_left" t-value="0.0"></t>
                            <t t-set="count" t-value="1"></t>
                            <t t-set="curr_acc" t-value="asset.category_id.account_asset_id"></t>
                        </t>
			            <tr>
				            <td>
                                <span t-esc="'%02d' % count"/>
                            </td>
				            <td colspan="2">
                                <span t-esc="asset.name"/>
                            </td>
				            <td style="text-align:right">
                                <span t-esc="formatLang(asset.purchase_value)"/>
                            </td>
                            <t t-set="depr" t-value="depr_sum(asset.depreciation_line_ids, form)"></t>
                            <t t-set="left" t-value="asset.purchase_value - depr"></t>
			                <td style="text-align:right">
                                <span t-esc="formatLang(depr)"/>
                            </td>
			                <td style="text-align:right">
                                <span t-esc="formatLang(left)"/>
                            </td>
			            </tr>
                        <t t-if="curr_acc == asset.category_id.account_asset_id">
                            <t t-set="account_total_purchase" t-value="account_total_purchase + asset.purchase_value"></t>
                            <t t-set="account_total_depr" t-value="account_total_depr + depr"></t>
                            <t t-set="account_total_left" t-value="account_total_left + left"></t>
                            <t t-set="count" t-value="count + 1"></t>
                        </t>
                        <t t-set="total_purchase" t-value="total_purchase + asset.purchase_value"></t>
                        <t t-set="total_depr" t-value="total_depr + depr"></t>
                        <t t-set="total_left" t-value="total_left + left"></t>
                        <t t-if="test_count == len(asset_list)">
        	                <tr style="border-bottom: 1px solid black;">
				                <td colspan="3">
					                <span>Kopā kontā:</span>
				                </td>
				                <td style="border-top:1px solid; text-align:right;">
					                <span t-esc="formatLang(account_total_purchase)"/>
				                </td>
				                <td style="border-top:1px solid; text-align:right;">
					                <span t-esc="formatLang(account_total_depr)"/>
				                </td>
				                <td style="border-top:1px solid; text-align:right;">
					                <span t-esc="formatLang(account_total_left)"/>
				                </td>
			                </tr>
        	                <tr>
				                <td colspan="3" style="border-top:1px solid; font-weight: bold;">
					                <span>Kopā pavisam:</span>
				                </td>
				                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
					                <span t-esc="formatLang(total_purchase)"/>
				                </td>
				                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
					                <span t-esc="formatLang(total_depr)"/>
				                </td>
				                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
					                <span t-esc="formatLang(total_left)"/>
				                </td>
			                </tr>
                        </t>
				    </t>
		        </tbody>
	        </table>
        </div>
    </t>
</template>

<template id="asset_list_report">
    <t t-call="report.html_container">
        <t t-foreach="doc_ids" t-as="doc_id">
            <t t-raw="translate_doc(doc_id, doc_model, 'company_id.partner_id.lang', 'l10n_lv_account_asset.asset_list_report_document')"/>
        </t>
    </t>
</template>

</data>
</openerp>