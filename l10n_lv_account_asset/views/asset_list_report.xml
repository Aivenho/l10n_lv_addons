<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="asset_list_report_document">
    <t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <div class="page">
            <style type="text/css">
                div.title {
                    font-size: 18px;
                    display: inline;
                    text-align: center;
                    vertical-align: middle;
                    position: fixed;
                    left: 35%;
                    margin-top: 20px; 
                    margin-bottom: 20px;
                }
                table.list_table td.header {
                    font-weight: normal;
                    text-align: center;
                    vertical-align: middle;
                }
                table.list_table td {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    padding-left: 4px;
                    padding-right: 4px;
                }
            </style>
            <t t-set="title" t-value="(company.partner_id.title and (company.partner_id.title.shortcut and company.partner_id.title.shortcut.upper()) or company.partner_id.title.name) or ''"></t>
            <div width="100%">
                <div style="float: left; text-align: left; display: inline; vertical-align: middle; margin-top: 20px; margin-bottom: 20px;">
                    <span t-esc="company.name"/>
                    <span t-esc="title"/>
                </div>
	            <div class="title">List of Assets</div>
                <div style="float: right; text-align: right; display: inline; vertical-align: middle; margin-top: 20px; margin-bottom: 20px;">
	                <span t-if="data">
                        <span>on</span>
                        <span style="font-weight: bold;" t-esc="formatLang(data['form']['date'], date=True)"/>
                    </span>
                </div>
            </div>
	        <br/>
	        <br/>
	        <br/>
	        <br/>
            <table class="list_table"  width="100%">
		        <tbody>
			        <tr style="border: 1px solid black;">
				        <td class="header" colspan="3"></td>
				        <td class="header">Book value</td>
				        <td class="header">Depreciation</td>
				        <td class="header">Residual value</td>
			        </tr>
                    <t t-set="total_purchase" t-value="0.0"></t>
                    <t t-set="total_depr" t-value="0.0"></t>
                    <t t-set="total_left" t-value="0.0"></t>
                    <t t-set="form" t-value="data and data['form'] or {}"></t>
                    <t t-set="account_list" t-value="lines(form)"></t>
                    <t t-set="test_count" t-value="0"></t>
                    <t t-foreach="account_list" t-as="account">
                        <t t-set="test_count" t-value="test_count + 1"></t>
			            <tr>
				            <td style="border-top:none; text-align:left; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span>Account:</span>
                            </td>
				            <td style="border-top:none; text-align:left; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span t-esc="account['account_code']"/>
                            </td>
				            <td style="border-top:none; text-align:center; font-weight: bold; padding-top: 4px !important; padding-bottom: 4px !important;">
                                <span t-esc="account['account_name']"/>
                            </td>
				            <td colspan="3"/>
			            </tr>
                        <t t-set="count" t-value="0"></t>
			            <tr t-foreach="account['asset_list']" t-as="asset">
                            <t t-set="count" t-value="count + 1"></t>
				            <td>
                                <span t-esc="'%02d' % count"/>
                            </td>
				            <td colspan="2">
                                <span t-esc="asset['name']"/>
                            </td>
				            <td style="text-align:right">
                                <span t-esc="formatLang(asset['book'])"/>
                            </td>
			                <td style="text-align:right">
                                <span t-esc="formatLang(asset['depr'])"/>
                            </td>
			                <td style="text-align:right">
                                <span t-esc="formatLang(asset['left'])"/>
                            </td>
			            </tr>
    	                <tr style="border-bottom: 1px solid black;">
			                <td colspan="3">
				                <span>Total in account:</span>
			                </td>
			                <td style="border-top:1px solid; text-align:right;">
				                <span t-esc="formatLang(account['acc_book'])"/>
			                </td>
			                <td style="border-top:1px solid; text-align:right;">
				                <span t-esc="formatLang(account['acc_depr'])"/>
			                </td>
			                <td style="border-top:1px solid; text-align:right;">
				                <span t-esc="formatLang(account['acc_res'])"/>
			                </td>
		                </tr>
                        <t t-set="total_purchase" t-value="total_purchase + account['acc_book']"></t>
                        <t t-set="total_depr" t-value="total_depr + account['acc_depr']"></t>
                        <t t-set="total_left" t-value="total_left + account['acc_res']"></t>
    	                <tr t-if="test_count == len(account_list)">
			                <td colspan="3" style="border-top:1px solid; font-weight: bold;">
				                <span>Total:</span>
			                </td>
			                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
				                <span t-esc="formatLang(total_purchase)"/>
			                </td>
			                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
				                <span t-esc="formatLang(total_depr)"/>
			                </td>
			                <td style="border-top:1px solid; text-align:right; font-weight: bold;">
				                <span t-esc="formatLang(total_left)"/>
			                </td>
		                </tr>
				    </t>
		        </tbody>
	        </table>
        </div>
    </t>
</template>

<template id="asset_list_report">
    <t t-call="report.html_container">
        <t t-set="doc_ids" t-value="[doc_ids[0]]"></t>
        <t t-foreach="doc_ids" t-as="doc_id">
            <t t-raw="translate_doc(doc_id, doc_model, 'company_id.partner_id.lang', 'l10n_lv_account_asset.asset_list_report_document')"/>
        </t>
    </t>
</template>

</data>
</openerp>