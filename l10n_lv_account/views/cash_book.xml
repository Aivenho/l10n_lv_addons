<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="cash_book_document">
    <t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <div class="page">
            <style type="text/css">
                div.company {
                    text-align: left;
                }
                div.title {
                    font-weight: bold;
                    text-align: center;
                    margin-top: 20px;
                    margin-bottom: 20px;
                }
                table.list td {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    padding-left: 4px;
                    padding-right: 4px;
                }
                table.list th {
                    font-weight: normal;
                    border: 1px solid black;
                    padding-top: 8px;
                    padding-bottom: 8px;
                    padding-left: 8px;
                    padding-right: 8px;
                }
            </style>
            <t t-set="title" t-value="(company.partner_id.title and (company.partner_id.title.shortcut and company.partner_id.title.shortcut.upper()) or company.partner_id.title.name) or ''"></t>
            <div class="company">
                <div style="font-weight: bold; font-size: 16px;">
                    <span t-esc="company.name"/>
                    <span t-esc="title"/>
                </div>
                <div style="font-size: 14px;">
                    <span t-esc="company.vat"/>
                </div>
            </div>
            <div class="title">
                <div>
                    <span>Cash desk closing:</span>
                    <span t-field="o.name"/>
                </div>
                <div>
                    <span t-field="o.date"/>
                </div>
                <div>
                    <span>Cash desk:</span>
                    <span t-field="o.journal_id.name"/>
                </div>
            </div>
            <table width="100%" class="list">
                <thead>
                    <tr>
                        <th>Order No.</th>
                        <th>Received from or handed out to</th>
                        <th>
                            <span>Income</span><span t-if="o.currency">,</span>
                            <span t-esc="o.currency and o.currency.name or ''"/>
                        </th>
                        <th>
                            <span>Expense</span><span t-if="o.currency">,</span>
                            <span t-esc="o.currency and o.currency.name or ''"/>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2" style="text-align: right; font-weight: bold;">
                            <span>Balance at the beginning of the day:</span>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="(o.balance_start >= 0.0) and formatLang(o.balance_start) or formatLang(0.0)"/>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="(o.balance_start &lt; 0.0) and formatLang((o.balance_start * (-1.0))) or formatLang(0.0)"/>
                        </td>
                    </tr>
                    <tr t-foreach="o.line_ids" t-as="l">
                        <td>
                            <span t-field="l.ref"/>
                        </td>
                        <td>
                            <span t-field="l.partner_id.name"/>
                        </td>
                        <td style="text-align: right;">
                            <span t-esc="(l.amount >= 0.0) and formatLang(l.amount) or '.'"/>
                        </td>
                        <td style="text-align: right;">
                            <span t-esc="(l.amount &lt; 0.0) and formatLang((l.amount * (-1.0))) or '.'"/>
                        </td>
                    </tr>
                    <t t-set="turn" t-value="turnover(o.line_ids)"></t>
                    <tr style="border-top: 1px solid black;">
                        <td colspan="2" style="text-align: right; font-weight: bold;">
                            <span>Turnover:</span>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="formatLang(turn['income'])"/>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="formatLang(turn['expense'])"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: right; font-weight: bold;">
                            <span>Balance at end of the day:</span>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="(o.balance_end >= 0.0) and formatLang(o.balance_end) or formatLang(0.0)"/>
                        </td>
                        <td style="text-align: right; font-weight: bold;">
                            <span t-esc="(o.balance_end &lt; 0.0) and formatLang(o.balance_end) or formatLang(0.0)"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: right; font-weight: bold; padding-top: 10px;">
                            <span>Cashier:</span>
                        </td>
                        <td colspan="2"></td>
                    </tr>
                    <tr>
                        <td colspan="4" style="padding-left: 20px; font-weight: bold;">
                            <div>The entries in the cash book were checked and received:</div>
                            <div>
                                <span>income orders</span>
                                <span>-</span>
                                <span t-esc="line_count(o.line_ids)['income']"/>
                            </div>
                            <div>
                                <span>expense orders</span>
                                <span>-</span>
                                <span t-esc="line_count(o.line_ids)['expense']"/>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: right; font-weight: bold;">
                            <span>Accountant:</span>
                        </td>
                        <td colspan="2"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </t>
</template>

<template id="cash_book">
    <t t-call="report.html_container">
        <t t-foreach="doc_ids" t-as="doc_id">
            <t t-raw="translate_doc(doc_id, doc_model, 'user_id.lang', 'l10n_lv_account.cash_book_document')"/>
        </t>
    </t>
</template>

</data>
</openerp>