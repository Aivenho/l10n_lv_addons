<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="invoice_out_document">
    <t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <div class="page">
            <style type="text/css">
                img.logo {
                    width: auto;
                    height: 2cm;
                }
                section {
                    margin-bottom: 2em;
                }
                .label-out {
                    font-weight: bold;
                    font-size: 1.4em;
                }
                .address {
                    font-size: 1em;
                }
                .address tr td:first-child{
                    color: #585858;
                }
                .align-left {
                    text-align: left !important;
                }
                .align-right {
                    text-align: right !important;
                }
                td, th {
                    padding-top: 2px;
                    padding-bottom: 2px;
                    padding-left: 4px;
                    padding-right: 4px;
                }
                th {
                    border: 1px solid black;
                    background-color: #F8F8F8;
                }
                section.title {
                    margin-top: 2.5cm;
                    margin-left: 0cm;
                    margin-right: 0cm;
                }
            </style>
            <t t-set="receiver" t-value="o.partner_id"></t>
            <t t-set="rec_title" t-value="form_title(o.partner_id)"></t>
            <t t-if="o.type in ['in_invoice', 'in_refund']">
                <t t-set="receiver" t-value="company"></t>
                <t t-set="rec_title" t-value="form_title(company.partner_id)"></t>
            </t>
            <t t-set="supplier" t-value="company"></t>
            <t t-set="sup_title" t-value="form_title(company.partner_id)"></t>
            <t t-set="sup_logo" t-value="company.logo"></t>
            <t t-if="o.type in ['in_invoice', 'in_refund']">
                <t t-set="supplier" t-value="o.partner_id"></t>
                <t t-set="sup_title" t-value="form_title(o.partner_id)"></t>
                <t t-set="sup_logo" t-value="o.partner_id.image"></t>
            </t>
            <section>
                <img t-att-src="'data:image/png;base64,%s' % sup_logo" class="logo"/>
            </section>
            <section class="title">
                <div style="float: left; max-width: 90mm;">
                    <div>
        	            <span class="label-out" t-esc="receiver.name"/><span class="label-out" t-if="rec_title">,</span>
                        <span class="label-out" t-esc="rec_title or ''"/>
                    </div>
                    <div>
                        <span t-esc="form_address(receiver)"/>
                    </div>
                </div>
                <div style="float: right;">
                    <div>
                        <span class="label-out">Invoice No.</span>
                        <span t-if="o.number" class="label-out" t-esc="o.number or ''"/>
                        <span t-if="not o.number" class="label-out" style="color: white; border-bottom: 1px solid black;">________________</span>
                    </div>
                    <div>
                        <span t-if="o.date_invoice" style="float: right;" t-esc="formatLang(o.date_invoice, date=True)"/>
                        <span t-if="not o.date_invoice" style="color: white; border-bottom: 1px solid black; float: right;">________________</span>
                    </div>
                </div>
            </section>
            <section style="margin-top: 4.5cm;">
    	        <table class="address" style="width: 100%;">
    	            <tr>
        		        <td style="color: black !important; white-space: pre;">Recipient requisites:</td>
        		        <td colspan="4" style="width: 100%;"></td>
    	            </tr>
    	            <tr>
        		        <td style="white-space: pre;">Name:</td>
        		        <td style="font-weight: bold;" colspan="4">
        	                <span t-esc="receiver.name"/><span t-if="rec_title">,</span>
                            <span t-esc="rec_title or ''"/>
                        </td>
    	            </tr>
    	            <tr t-if="receiver.vat">
        		        <td style="white-space: pre;">VAT registration No.:</td>
        		        <td colspan="4" t-esc="receiver.vat or ''"/>
    	            </tr>
    	            <tr t-if="form_address(receiver)">
        		        <td style="white-space: pre;">Address:</td>
        		        <td colspan="4" t-esc="form_address(receiver)"/>
    	            </tr>
    	            <tr t-if="receiver.bank_ids">
        		        <td style="white-space: pre;">
                            <span t-if="len(receiver.bank_ids) == 1">Billing account:</span>
                            <span t-if="len(receiver.bank_ids) > 1">Billing accounts:</span>
                        </td>
                        <td colspan="4">
                            <div t-foreach="receiver.bank_ids" t-as="b">
                                <span t-esc="b.acc_number"/><span t-if="b.acc_number and b.bank_name">,</span>
                                <span t-esc="b.bank_name"/>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="color: white; white-space: pre;">...</td>
                        <td style="color: white;" colspan="4">...</td>
                    </tr>
    	            <tr>
        		        <td style="color: black !important; white-space: pre;">Payment term:</td>
        		        <td>
                            <span t-if="o.date_due or o.date_invoice" t-esc="(o.date_due and formatLang(o.date_due, date=True)) or (o.date_invoice and formatLang(o.date_invoice, date=True)) or ''"/>
                            <span t-if="o.date_due == False and o.date_invoice == False" style="color: white; border-bottom: 1px solid black;">________________</span>
                        </td>
                        <td class="align-right">
                            <span t-if="o.origin">Source Document:</span>
                        </td>
                        <td class="align-left">
                            <span t-esc="o.origin"/>
                        </td>
                        <td class="align-right">
                            <span t-esc="o.name"/>
                        </td>
    	            </tr>
    	        </table>
            </section>
            <section>
	            <table class="list_table" width="100%">
	                <thead>
                        <tr>
                            <th>No.</th>
                            <th>Name</th>
                            <th>UoM</th>
                            <th class="align-right">Quantity</th>
                            <th class="align-right">
                                <span>Price</span><span t-if="o.currency_id">,</span>
                                <span t-esc="o.currency_id and o.currency_id.name or ''"/>
                            </th>
                            <th class="align-right">
                                <span>Amount</span><span t-if="o.currency_id">,</span>
                                <span t-esc="o.currency_id and o.currency_id.name or ''"/>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    <t t-set="seq" t-value="0"></t>
                        <tr t-foreach="o.invoice_line" t-as="line">
                            <t t-set="seq" t-value="seq + 1"></t>
                            <td class="align-left">
                                <span t-esc="seq"/><span>.</span>
                            </td>
                            <td class="align-left">
                                <span t-esc="line.name"/>
                            </td>
                            <td>
                                <span t-esc="line.uos_id and line.uos_id.name or ''"/>
                            </td>
                            <td class="align-right">
                                <span t-esc="line.quantity"/>
                            </td>
                            <td class="align-right">
                                <span t-esc="formatLang(line.price_unit)"/>
                            </td>
                            <td class="align-right">
                                <span t-esc="formatLang(line.price_subtotal)"/>
                            </td>
                        </tr>
                        <tr style="border-top: 1px solid black;">
                            <td colspan="2" class="align-left">Total:</td>
                            <td colspan="3" class="align-left"></td>
                            <td class="align-right">
                                <span t-esc="formatLang(o.amount_untaxed)"/>
                            </td>
                        </tr>
                        <tr t-foreach="o.tax_line" t-as="tax">
                            <td colspan="2" class="align-left">
                                <span t-esc="tax.name"/>
                            </td>
                            <td colspan="3" class="align-right"></td>
                            <td class="align-right">
                                <span t-esc="formatLang(tax.amount)"/>
                            </td>
                        </tr>
                        <tr t-if="not o.tax_line">
                            <td colspan="2" class="align-left">Taxes:</td>
                            <td colspan="3" class="align-right"></td>
                            <td class="align-right">
                                <span t-esc="formatLang(o.amount_tax)"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" class="align-left" style="font-weight: bold;">
                                <span>Invoice total:</span>
                            </td>
                            <td colspan="3" class="align-right"></td>
                            <td class="align-right" style="font-weight: bold;">
                                <span t-esc="formatLang(o.amount_total)"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="6" class="align-right">
                                <span>Amount in words:</span>
                                <span t-esc="o.amount_total" t-esc-options='{"widget": "verbose", "display_currency": "o.currency_id"}'/>
                            </td>
                        </tr>
	                </tbody>
	            </table>
            </section>
            <section>
    	        <table class="address">
    	            <tr>
        		        <td colspan="2" style="color: black !important;">
                            <span>Supplier requisites:</span>
                        </td>
    	            </tr>
    	            <tr>
        		        <td colspan="2" class="label-out" style="color: black !important;">
                            <span t-esc="supplier.name"/><span t-if="sup_title">,</span>
                            <span t-esc="sup_title"/>
                        </td>
    	            </tr>
    	            <tr>
        		        <td>Unified registration number:</td>
        		        <td style="font-weight: bold;">
                            <div t-if="supplier.company_registry" t-esc="supplier.company_registry"/>
                            <div t-if="not supplier.company_registry">
                                <span style="color: white; border-bottom: 1px solid black;">____________________________</span>
                            </div>
                        </td>
    	            </tr>
    	            <tr>
        		        <td>VAT registration No.:</td>
        		        <td style="font-weight: bold;">
                            <div t-if="supplier.vat" t-esc="supplier.vat"/>
                            <div t-if="not supplier.vat">
                                <span style="color: white; border-bottom: 1px solid black;">____________________________</span>
                            </div>
                        </td>
    	            </tr>
    	            <tr t-if="form_address(supplier)">
        		        <td>Address:</td>
        		        <td t-esc="form_address(supplier)"/>
    	            </tr>
    	            <tr>
        		        <td>
                            <span t-if="len(supplier.bank_ids) &lt;= 1">Billing account:</span>
                            <span t-if="len(supplier.bank_ids) > 1">Billing accounts:</span>
                        </td>
                        <td>
                            <div t-foreach="supplier.bank_ids" t-as="b">
                                <span style="font-weight: bold;" t-esc="b.acc_number"/><span t-if="b.acc_number and b.bank_name">,</span>
                                <span t-esc="b.bank_name"/><span t-if="(b.acc_number or b.bank_name) and b.bank_bic">,</span>
                                <span t-if="b.bank_bic">Bank Identifier Code</span>
                                <span t-esc="b.bank_bic"/>
                            </div>
                            <div t-if="not supplier.bank_ids">
                                <span style="color: white; border-bottom: 1px solid black;">__________________________________________</span>
                                <span>Bank Identifier Code</span>
                                <span style="color: white; border-bottom: 1px solid black;">______________</span>
                            </div>
                        </td>
                    </tr>
    	        </table>
            </section>
	        <p>
                <div>For payment the invoice amount has to be transferred to the supplier billing account mentioned in this document.</div>
                <div>Please indicate invoice number in purpose of payment.</div>
            </p>
	        <p>
                <div>In accordance with Law &quot;On Accounting&quot; article 7.1 this invoice is prepared electronically and is valid without signature and stamp.</div>
            </p>
        </div>
    </t>
</template>

<template id="invoice_out">
    <t t-call="report.html_container">
        <t t-foreach="doc_ids" t-as="doc_id">
            <t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'l10n_lv_account.invoice_out_document')"/>
        </t>
    </t>
</template>

</data>
</openerp>